<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PVB API Endpoints | Locked</title>
<style>
  :root {
    --bg: #ffffff;
    --text: #111827;
    --muted: #6b7280;
    --card: #f9fafb;
    --border: #e5e7eb;
    --accent: #2563eb;
  }

  * { box-sizing: border-box; font-family: "Poppins", sans-serif; }
  body {
    background: var(--bg);
    color: var(--text);
    margin: 0;
    padding: 30px;
  }

  h1 {
    font-size: 24px;
    margin-bottom: 10px;
  }

  p.note {
    color: var(--muted);
    margin-bottom: 30px;
  }

  .grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
  }

  .card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 20px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.05);
  }

  .card h2 {
    font-size: 18px;
    margin: 0 0 8px 0;
  }

  .card p {
    color: var(--muted);
    font-size: 14px;
    margin-bottom: 16px;
  }

  button {
    background: var(--accent);
    color: #fff;
    border: none;
    border-radius: 8px;
    padding: 10px 16px;
    font-weight: 600;
    cursor: pointer;
  }

  button:hover {
    background: #1d4ed8;
  }

  a.endpoint {
    display: inline-block;
    margin-top: 8px;
    color: var(--accent);
    text-decoration: none;
    word-break: break-all;
  }

  /* Modal */
  .modal {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.4);
    display: none;
    align-items: center;
    justify-content: center;
  }

  .modal-content {
    background: #fff;
    padding: 20px;
    border-radius: 12px;
    max-width: 350px;
    width: 100%;
    box-shadow: 0 6px 25px rgba(0,0,0,0.1);
  }

  .modal-content h3 {
    margin-top: 0;
  }

  input[type=password] {
    width: 100%;
    padding: 10px;
    border-radius: 8px;
    border: 1px solid var(--border);
    margin-bottom: 10px;
  }

  .error {
    color: red;
    font-size: 13px;
  }
</style>
</head>
<body>
  <h1>PVB API Endpoints (Locked)</h1>
  <p class="note">Masukkan password untuk membuka link endpoint API.</p>

  <div class="grid">
    <div class="card" id="card-v1">
      <h2>PVB v1</h2>
      <p>Endpoint versi lama (stocks)</p>
      <button onclick="unlock('v1')">ðŸ”’ Unlock</button>
      <a href="#" target="_blank" class="endpoint hidden" id="link-v1"></a>
    </div>

    <div class="card" id="card-v2">
      <h2>PVB v2</h2>
      <p>Endpoint versi baru (stock)</p>
      <button onclick="unlock('v2')">ðŸ”’ Unlock</button>
      <a href="#" target="_blank" class="endpoint hidden" id="link-v2"></a>
    </div>
  </div>

  <div class="modal" id="modal">
    <div class="modal-content">
      <h3>Masukkan Password</h3>
      <input type="password" id="passwordInput" placeholder="Password">
      <div class="error" id="errorMsg"></div>
      <button onclick="checkPassword()">Buka</button>
    </div>
  </div>

<script>
  const PASSWORD_HASH = "4edc37b85288bcd425f378a8d8b78a0e9a72f19318b9d1136e8bd3f244d04215"; // sha256("pashapro")
  const endpoints = {
    v1: "aHR0cHM6Ly9wYW5lbGNsb3VkLnh5ei9hcGkvc3RvY2tz",
    v2: "aHR0cHM6Ly9wYW5lbGNsb3VkLnh5ei9hcGkvc3RvY2s="
  };

  let target = null;

  async function sha256(str) {
    const buf = new TextEncoder().encode(str);
    const hash = await crypto.subtle.digest("SHA-256", buf);
    return Array.from(new Uint8Array(hash))
      .map(b => b.toString(16).padStart(2, "0"))
      .join("");
  }

  function unlock(id) {
    target = id;
    document.getElementById("modal").style.display = "flex";
    document.getElementById("passwordInput").focus();
  }

  async function checkPassword() {
    const input = document.getElementById("passwordInput").value;
    const error = document.getElementById("errorMsg");
    const hash = await sha256(input);

    if (hash === PASSWORD_HASH) {
      error.textContent = "";
      document.getElementById("modal").style.display = "none";
      revealEndpoint(target);
    } else {
      error.textContent = "Password salah.";
    }
  }

  function revealEndpoint(id) {
    const link = document.getElementById("link-" + id);
    const decoded = atob(endpoints[id]);
    link.href = decoded;
    link.textContent = decoded;
    link.classList.remove("hidden");
  }

  document.getElementById("modal").addEventListener("click", e => {
    if (e.target.id === "modal") {
      document.getElementById("modal").style.display = "none";
    }
  });
</script>
</body>
</html>
